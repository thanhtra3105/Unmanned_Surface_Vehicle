<!DOCTYPE html>
<html>
  <head>
    <title>USV Mission Planner</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100">

    <!-- Header -->
    <div class="bg-blue-700 text-white p-4 shadow">
      <h2 class="text-2xl font-bold">ðŸš¤ USV Mission Planner</h2>
    </div>

    <!-- Layout: 2 cá»™t -->
    <div class="flex min-h-screen">

      <!-- Cá»™t trÃ¡i: Map -->
      <div class="flex-1 relative">
        <div id="map" class="w-full h-full"></div>

        <!-- Controls floating trÃªn map -->
        <div class="absolute top-4 left-4 bg-white rounded-lg shadow p-3 space-x-2">
          <button onclick="clearWaypoints()" class="bg-red-500 text-white px-3 py-1 rounded">Clear</button>
          <button onclick="uploadMission()" class="bg-green-600 text-white px-3 py-1 rounded">Upload</button>
          <button onclick="startMission()" class="bg-blue-600 text-white px-3 py-1 rounded">Start</button>
        </div>

        <!-- Progress bar -->
        <div id="progress-container" class="absolute bottom-4 left-4 w-1/3 bg-gray-200 rounded">
          <div id="progress-bar" class="h-3 bg-blue-500 rounded" style="width: 0%"></div>
        </div>
      </div>

      <!-- Cá»™t pháº£i: Dashboard -->
      <div class="w-80 bg-white shadow-lg p-6 border-l border-gray-200">
        <h3 class="text-xl font-semibold mb-4">ðŸ“Š Dashboard</h3>

        <!-- Card link -->
        <a href="/telemetry" class="block bg-gray-100 rounded-xl shadow p-4 hover:shadow-lg transition">
          <h2 class="text-lg font-semibold mb-2 text-center">Telemetry Dashboard</h2>
          <canvas id="dashboardPreview" class="w-full h-40"></canvas>
        </a>
      </div>
    </div>
    
    <!-- ðŸ”¹ ThÃªm nÃºt Stream Video -->
    <a href="/stream" class="block bg-blue-600 text-white text-center rounded-xl py-3 font-semibold hover:bg-blue-700 transition">
      ðŸŽ¥ Live Stream
    </a>

    <!-- Google Maps -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDl7j1gjfJ-OentAm-aqDHu81p-Kv3WHos"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>

    <!-- ChartJS Preview -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      const ctx = document.getElementById("dashboardPreview");
      new Chart(ctx, {
        type: "doughnut",
        data: {
          labels: ["Battery", "Empty"],
          datasets: [{
            data: [70, 30], // demo % battery
            backgroundColor: ["#3b82f6", "#e5e7eb"]
          }]
        },
        options: { cutout: "70%" }
      });
    </script>
  </body>
</html>
